## 内存

![img_4.png](Image%2Fimg_4.png)

可以提供整体内存信息，各字段表示的意思如下：

![img_5.png](Image%2Fimg_5.png)

问题1：

冷热页
冷页表示该空闲页已经不再高速缓存中了(一般是指L2 Cache)，
热页表示该空闲页仍然在高速缓存中。冷热页是针对于每CPU的，每个zone中，都会针对于所有的CPU初始化一个冷热页的per-cpu-pageset.

字段	表示意思
VSS(virtual set size)	单个进程全部可访问的用户虚拟地址空间
RSS(Resident set size)	单个进程实际占用的内存大小(所有共享库的全部内存大小)
PSS(proportional set size)	不同于RSS，它只是按比例包含其所使用的共享库大小。
USS(Unique set size)	是单个进程的全部私有内存大小。
Swap	某个进程被交换出去的匿名页的大小就是Swap(包括在swap cache中的和真正交换到swap分区的都算)。
Pswap	模仿PSS的概念，因为每个匿名页可能会被多个进程使用。因此Swap 中的page按照目前还有多少进程使用它，按照比例分配得到pswap。
Uswap	模仿Uss的概念，私有的且被swap出去的内存的大小。

1.5./proc/pid/smaps
这个是对进程地址空间以及内存使用，最全面的展示。各项说明参考：
6f387000-6ff18000 rw-p 00000000 b3:15 7575       /data/dalvik-cache/arm/system@framework@boot.art
Size:                11844 kB             该段虚拟空间大小
Rss:                 11828 kB             = Shared_Clean+ Shared_Dirty+ Private_Clean+ Private_Dirty= Filecache+ Anonymous
Pss:                  2179 kB              = Pss_Filecache+ Pss_Anonymous
Uss:                  1304 kB              = Private_Filecache+Private_Anonymou
Shared_Clean:         7964 kB       和其它进程共享而且是干净的
Shared_Dirty:         2560 kB       和其它进程共享而且是脏的
Private_Clean:         616 kB        本进程私有而且是干净的
Private_Dirty:         688 kB         本进程私有而且是脏的
Referenced:          11544 kB
Filecache:            8580 kB           文件缓存 = Shared_Filecache+ Private_Filecache
Pss_Filecache:        1344 kB       按比例共享的文件缓存
Shared_Filecache:     7964 kB    多进程共享的文件缓存
Private_Filecache:     616 kB     私有的文件缓存
Anonymous:            3248 kB     匿名内存 = Shared_Anonymous+ Private_Anonymous
Pss_Anonymous:         835 kB     按比例共享的匿名内存
Shared_Anonymous:     2560 kB   多进程共享的匿名内存
Private_Anonymous:     688 kB   私有的匿名内存
AnonHugePages:           0 kB
Swap:                    0 kB              进程被交换出去的匿名页
PSwap:                   0 kB             按比例共享的被交换出去的匿名页
USwap:                   0 kB            私有的被交换出去的匿名页
KernelPageSize:          4 kB
MMUPageSize:             4 kB
Locked:                  0 kB
VmFlags: rd wr mr mw me ac mg

Dumpsys meminfo是android提供的比较有用的内存信息统计工具，并且结合了进程的adj，可以查看各组进程所占的内存情况。

有时需要评估二个版本或者同一个版本二种场景下的系统内存情况。比如某公司项目发现，插sim比不插sim，性能差，想看看这二种情况下的内存情况。
首先，可以收集信息，看看同样在开机５分钟的场景下，FreeRAM的差异。
下面的数据可以从/proc/meminfo和dumpsys meminfo中获得。

